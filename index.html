<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Blog de Alfredo</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<a href="https://wa.me/17869915753" class="whatsapp" target="_blank">
  ğŸ’¬ WhatsApp
</a>
<script src="js/script.js"></script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import {
    getFirestore,
    collection,
    addDoc,
    onSnapshot,
    query,
    orderBy,
    serverTimestamp
  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyANQJz8F4mZcivSLEoMNx_clHQcws1Knac",
    authDomain: "blog-de-alfredo.firebaseapp.com",
    projectId: "blog-de-alfredo",
    storageBucket: "blog-de-alfredo.firebasestorage.app",
    messagingSenderId: "682940841797",
    appId: "1:682940841797:web:cae9f58d444c3bf6c2082c",
    measurementId: "G-H1NQZGFJ9H"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const postText = document.getElementById("postText");
  const feed = document.getElementById("feed");

  // FunciÃ³n para publicar en Firestore
  window.publicar = async () => {
    const texto = postText.value.trim();
    if (texto === "") return;

    await addDoc(collection(db, "publicaciones"), {
      texto,
      fecha: serverTimestamp()
    });

    postText.value = "";
  };

  // Escuchar publicaciones en tiempo real
  const q = query(collection(db, "publicaciones"), orderBy("fecha", "desc"));
  onSnapshot(q, (snapshot) => {
    feed.innerHTML = "";
    snapshot.forEach(doc => {
      const post = doc.data();
      const div = document.createElement("div");
      div.className = "post";
      const fecha = post.fecha?.toDate().toLocaleString() || "Fecha desconocida";
      div.innerHTML = `<p>${post.texto}</p><small>${fecha}</small><hr>`;
      feed.appendChild(div);
    });
  });
</script>

<body>
  <header>
    <h1>Blog de Alfredo</h1>
    <p>Desde El Ayote, compartiendo ideas y pasiones ğŸŒ</p>
    <img src="images/alfredo.jpg" alt="Foto de Alfredo" class="foto-perfil" />
  </header>

<nav>
  <a href="index.html">Inicio</a>
  <a href="sobre.html">Sobre mÃ­</a>
  <a href="#contacto">Contacto</a>
</nav>

  <main>
    <article>
      <h2>Mi primera entrada</h2>
      <p>Â¡Hola! Bienvenido a mi blog personal. AquÃ­ compartirÃ© mis ideas, proyectos y cosas que me apasionan como el diseÃ±o web, la programaciÃ³n y mi vida en Wisconsin.</p>
    </article>

    <article>
      <h2>Â¿CÃ³mo aprendÃ­ a programar?</h2>
      <p>Todo comenzÃ³ en El Ayote, Chontales...</p>
    </article>
  </main>
  
<section id="post-section">
  <h2>Escribe algo, Alfredo</h2>
  <textarea id="postText" placeholder="Â¿QuÃ© estÃ¡s pensando?" rows="4"></textarea>
  <button onclick="publicar()">Publicar</button>
</section>

<section id="feed-section">
  <h2>Publicaciones recientes</h2>
  <div id="feed"></div>
</section
  
<section id="contacto">
  <h2>Contacto</h2>
  <p>Â¿Quieres comunicarte conmigo? Puedes escribirme un correo o mandarme un mensaje directo por WhatsApp.</p>
  <form action="contacto.php" method="POST">
    <input type="text" placeholder="Tu nombre" required>
    <input type="email" placeholder="Tu correo" required>
    <textarea placeholder="Tu mensaje..." required></textarea>
    <button type="submit">Enviar</button>
  </form>
</section>

  <footer>
    Â© 2025 Alfredo MarÃ­n | DiseÃ±ado con â¤ï¸ y mucho cafÃ©
    <a href="https://wa.me/17869915753" target="_blank" class="whatsapp-button">
  ğŸ“± EnvÃ­ame un mensaje por WhatsApp
</a>

<a href="https://www.facebook.com/JAHM.3011" target="_blank" class="btn-facebook">
  <i class="fab fa-facebook-f"></i> SÃ­gueme en Facebook
</a>
  </footer>
</body>
</html>
