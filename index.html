<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Blog de Alfredo</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<a href="https://wa.me/17869915753" class="whatsapp" target="_blank">
  üí¨ WhatsApp
</a>
<script src="js/script.js"></script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import {
    getFirestore,
    collection,
    addDoc,
    onSnapshot,
    query,
    orderBy,
    serverTimestamp
  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyANQJz8F4mZcivSLEoMNx_clHQcws1Knac",
    authDomain: "blog-de-alfredo.firebaseapp.com",
    projectId: "blog-de-alfredo",
    storageBucket: "blog-de-alfredo.firebasestorage.app",
    messagingSenderId: "682940841797",
    appId: "1:682940841797:web:cae9f58d444c3bf6c2082c",
    measurementId: "G-H1NQZGFJ9H"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const postText = document.getElementById("postText");
  const feed = document.getElementById("feed");

  // Funci√≥n para publicar en Firestore
  window.publicar = async () => {
    const texto = postText.value.trim();
    if (texto === "") return;

    await addDoc(collection(db, "publicaciones"), {
      texto,
      fecha: serverTimestamp()
    });

    postText.value = "";
  };

  // Escuchar publicaciones en tiempo real
  const q = query(collection(db, "publicaciones"), orderBy("fecha", "desc"));
  onSnapshot(q, (snapshot) => {
    feed.innerHTML = "";
    snapshot.forEach(doc => {
      const post = doc.data();
      const div = document.createElement("div");
      div.className = "post";
      const fecha = post.fecha?.toDate().toLocaleString() || "Fecha desconocida";
      div.innerHTML = `<p>${post.texto}</p><small>${fecha}</small><hr>`;
      feed.appendChild(div);
    });
  });
</script>

<body>
  <header>
    <h1>Blog de Alfredo</h1>
    <p>Desde El Ayote, compartiendo ideas y pasiones üåç</p>
    <img src="images/alfredo.jpg" alt="Foto de Alfredo" class="foto-perfil" />
  </header>

<nav>
  <a href="index.html">Inicio</a>
  <a href="sobre.html">Sobre m√≠</a>
  <a href="contacto.html">Contacto</a>
</nav>

  <section id="post-section">
  <h2>Escribe algo, Alfredo</h2>
  <textarea id="postText" placeholder="¬øQu√© est√°s pensando?" rows="4"></textarea>
  <button onclick="publicar()">Publicar</button>
</section>

<section id="feed-section">
  <h2>Publicaciones recientes</h2>
  <div id="feed"></div>
</section
  <main>
    <article>
      <h2>Mi primera entrada</h2>
      <p>¬°Hola! Bienvenido a mi blog personal. Aqu√≠ compartir√© mis ideas, proyectos y cosas que me apasionan como el dise√±o web, la programaci√≥n y mi vida en Wisconsin.</p>
    </article>

    <article>
      <h2>¬øC√≥mo aprend√≠ a programar?</h2>
      <p>Todo comenz√≥ en El Ayote, Chontales...</p>
    </article>
  </main>
  
  <footer>
    ¬© 2025 Alfredo Mar√≠n | Dise√±ado con ‚ù§Ô∏è y mucho caf√©
    <a href="https://wa.me/17869915753" target="_blank" class="whatsapp-button">
  üì± Env√≠ame un mensaje por WhatsApp
</a>

<a href="https://www.facebook.com/JAHM.3011" target="_blank" class="btn-facebook">
  <i class="fab fa-facebook-f"></i> S√≠gueme en Facebook
</a>
  </footer>
</body>
</html>
